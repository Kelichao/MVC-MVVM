<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>vue父子组件的通信</title>
</head>
<link rel="stylesheet" type="text/css" href="styles/main.css">
<body>
<script type="text/javascript" src="js/vue2.0.js"></script>
<div id="m-dialog">
	<my-dialog v-bind:state="flag" v-on:cancle="bbb"></my-dialog>
</div>
<button>打开弹窗</button>
</body>
<script type="text/javascript">
	document.querySelector("button").addEventListener("click", function(){
		vue1.flag = true;
	});
	Vue.component('my-dialog', {

		// 父组件给自组件传递数据
		props:["state"],
	  	template: 
	  	'<div class="m-dialog" v-if="state">\
		  	<div class="m-dialog_content" >\
				<div class="m-dialog_head" ></div>\
				<div class="m-dialog_middle">400-757-1000</div>\
				<div class="m-dialog_bottom f-flex">\
					<span class="u-cancle f-item" v-on:click="cancle">取消</span>\
					<span class="u-call f-item" v-on:click="call">呼叫</span>\
				</div>\
			</div>\
		<div>',
		methods: {
			cancle: function() {
				// this.state = false; // 不可以用这个方法
				// 与父组件通信一定要加上这句话
				this.$emit('cancle')
			},
			call: function() {
				window.location.href = 'tel://' + "400-757-1000";
			}
		}
	});


	var vue1 = new Vue({
		el: "#m-dialog",
		data: {
			flag: false
		},
		methods: {
			bbb: function() {
				this.flag = false;
			}
		}
	})
</script>
</html>